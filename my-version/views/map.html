<div ng-include="'views/header/connect-header.html'" ng-controller="headerController"></div>

<nav class="nav-menu " ng-class="{'not-open':closeMenu == true, 'open':openMenu==true}">
	<button class="nav-menu-button" ng-click="actionMenu()">
		<span></span>
		<span></span>
		<span></span>
	</button>

	<ul ng-if="closeMenu" class="nav-menu-link">
		<li><a href="#/"> <i class="icon-home"></i></a></li>
		<li class="page-active"> <a href="#/map"><i class="icon-map"></i></a></li>
		<li> <a href="#/add-marker"><i class="icon-add-marker"></i></a></li>
	</ul>

	<div ng-if="openMenu">
		<div class="switch-form-map">
			<button ng-click="formTrace()" ng-class="{'form-active' : (activeTrace == true)}" class="form-active"> Tracer itinéraire</button>
			<button ng-click="formSearch()" ng-class="{'form-active' : (activeSearch == true)}" >Recherche </button>
		</div>

		<form class="form-map" ng-if='activeTrace' ng-submit="traceMap()">
			<div class="title-form-map"> Informations de votre trajet </div>
			<div>
				<label for="startPoint"><span class="icon-location"></span></label>
				<input id="startPoint" type="text" placeholder="point de départ" list="listStartPoint" ng-model='traceMap.start' required>
				<datalist id="listStartPoint">
					<option ng-repeat="marker in getMarkers | filter : {nameMarker : traceMap.start} " value="{{marker.nameMarker}}"/>
				</datalist>
			</div>

			<div>
				<label for="endPoint"><span class="icon-racing-flags"></span></label>
				<input id="endPoint" type="text" placeholder="point d'arrivé" list="listEndPoint" ng-model='traceMap.end' required>
				<datalist id="listEndPoint">
					<option ng-repeat="marker in getMarkers | filter : {nameMarker : traceMap.end}  " value="{{marker.nameMarker}}"/>
				</datalist>
			</div>
			
			<input class="btn btn-send" type="submit" value="Tracer l'itinéraire">
		</form>

		<form class="form-map" ng-if='activeSearch' ng-submit="searchMap()">
			<input type="text" placeholder="recherche" list="listMarkers" ng-model='searchMap.value' required>
			<br><br>
			<input type="submit" value="rechercher">
		</form>
	</div>
</nav>

<leaflet center="center" tiles="tiles" defaults="defaults" event-broadcast="events" markers="markers" height="100%" width="100%" class="map-center"></leaflet>
