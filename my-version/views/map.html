<div ng-include="'views/header/connect-header.html'" ng-controller="headerController"></div>

<nav class="nav-menu " ng-class="{'not-open':closeMenu == true, 'open':openMenu==true}">
	<button class="nav-menu-button" ng-click="actionMenu()">
		<span></span>
		<span></span>
		<span></span>
	</button>

	<ul ng-if="closeMenu" class="nav-menu-link">
		<li><a href=" "> <i class="icon-home"></i></a></li>
		<li class="page-active"> <a href="map"><i class="icon-map"></i></a></li>
		<li> <a href="add-marker"><i class="icon-add-marker"></i></a></li>
	</ul>

	<div ng-if="openMenu">
		<div class="switch-form-map">
			<button ng-click="formTrace()" ng-class="{'form-active' : (activeTrace == true)}" class="form-active"> Tracer itinéraire</button>
			<button ng-click="formSearch()" ng-class="{'form-active' : (activeSearch == true)}" >Recherche </button>
		</div>

		<form class="form-map" ng-if='activeTrace' ng-submit="traceMap()">
			<div class="title-form-map"> Informations de votre trajet </div>
			<div>
				<label for="startPoint"><span class="icon-location"></span></label>
				<div style="display:inline-block;">
					<input id="startPoint" type="text" placeholder="point de départ" ng-model="traceMap.start" uib-typeahead="marker as marker.nameMarker for marker in markersList | filter: $viewValue | limitTo: 15" class="form-control" typeahead-show-hint="true" typeahead-min-length="0">
				</div>
				<!-- <label for="startPoint"><span class="icon-location"></span></label>
				<input id="startPoint" type="text" placeholder="point de départ" list="listStartPoint" ng-model='traceMap.start' required>
				<datalist id="listStartPoint">
					<option ng-repeat="marker in markersList | filter : {nameMarker : traceMap.start} " value="{{marker.nameMarker}}"/>
				</datalist> -->
			</div>

			<div>
				<label for="endPoint"><span class="icon-racing-flags"></span></label>
				<div style="display:inline-block;">
					<input id="endPoint" type="text" placeholder="point d'arrivé" ng-model='traceMap.end' uib-typeahead="marker as marker.nameMarker for marker in markersList | filter: $viewValue | limitTo: 15" class="form-control" typeahead-show-hint="true" typeahead-min-length="0">
				</div>
				<!-- <label for="endPoint"><span class="icon-racing-flags"></span></label>
				<input id="endPoint" type="text" placeholder="point d'arrivé" list="listEndPoint" ng-model='traceMap.end' required>
				<datalist id="listEndPoint">
					<option ng-repeat="marker in markersList | filter : {nameMarker : traceMap.end}  " value="{{marker.nameMarker}}"/>
				</datalist> -->
			</div>
			
			<input class="btn btn-send" type="submit" value="Tracer l'itinéraire">
		</form>

		<form class="form-map" ng-if='activeSearch' ng-submit="searchMap()">
			<input type="text" placeholder="recherche" ng-model='searchMap.value' required>
			<br><br>
			<input type="submit" value="rechercher">
		</form>
	</div>
</nav>

<leaflet center="center" tiles="tiles" defaults="defaults" event-broadcast="events" markers="markers" height="100%" width="100%" class="map-center"></leaflet>


<div class="marker-information" ng-if="openPopin">
	<div class="row">
		<div class="col-md-12 col-lg-12"> 
			<div class="marker-title"> {{ titlePopin }} 
				<span class="glyphicon glyphicon-remove" ng-click="closePopin()"></span>
			</div>
			<div class="marker-informations">
				<div class="marker-info-group">
					<div class="info-title">Description</div>
					<p> {{ descriptionPopin }}  <br> {{ descriptionExit }}</p>
				</div>
				<div class="marker-info-group" ng-if="markerSeeToilet">
					<div class="info-title">Toilettes Adaptés 
						<span ng-class="{'icon-checkbox-check': toilet == true, 'icon-checkbox-unchecked' : toilet == false}"></span>
					</div>
				</div>
				<div class="marker-info-group" ng-if="markerSeeEquipment">
					<div class="info-title">Equipements Adaptés 
						<span ng-class="{'icon-checkbox-check': equipment == true, 'icon-checkbox-unchecked' : equipment == false}"></span>
					</div>
				</div>
				<div class="marker-info-group" ng-if="markerSeeGantry">
					<div class="info-title">Portiques pour handicapé 
						<span ng-class="{'icon-checkbox-check': gantry == true, 'icon-checkbox-unchecked' : gantry == false}"></span>
					</div>
				</div>
				<div class="marker-info-group" ng-if="markerSeeMetro">
					<div class="info-title"> Les sorties de métros </div>
					<p> {{ allExitPopin }} </p>
				</div>
				<div class="marker-info-group" ng-if="markerSeeMetro">
					<div class="info-title">Bureau d'information  
						<span ng-class="{'icon-checkbox-check': office == true, 'icon-checkbox-unchecked' : office == false}"></span>
					</div>
				</div>
				<div class="marker-info-group" ng-if="markerSeeMetro">
					<div class="info-title">Ligne de metro</div>
					<div> {{ linesMetros }}  </div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="map-filter">
	<button>
		<span></span>
		<span></span>
	</button>
	<div class="map-filter-type">
		<div class="name-filter" ng-click="seeAll()" ng-class="{'filter-active' : (filter == 1) }">Tout voir</div>
		<div class="name-filter" ng-click="seePlace()" ng-class="{'filter-active' : (filter == 2) }">Lieux</div>
		<div class="name-filter" ng-click="seeAccess()" ng-class="{'filter-active' : (filter == 3) }">Accès</div>
	</div>
	<div class="map-filter-categorie"></div>
</div>